<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Cart</title>
    <style>
        /* Your cart-specific CSS styles */
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 50px;
        }

        .container>div {
            width: 300px;
            background-color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
            border: 2px solid black;
        }

        .container div img {
            width: 100%;
            height: 60%;
            object-fit: contain;
        }

        h1 {
            font-size: 1.5rem;
            margin: 1rem 0 0.5rem;
            text-overflow: ellipsis;
            overflow: hidden;
            width: 90%;
            height: 2rem;
            margin: 20px auto;
            white-space: nowrap;
        }

        h4 {
            font-size: 1rem;
            margin-top: 0.5rem;
        }

        button {
            background-color: #4caf50;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            cursor: pointer;
            margin-top: 1rem;
            border-radius: 4px;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>

<body>
    <div class="container"></div>

    <script>
        let maindiv = document.querySelector(".container");

        let renderCart = () => {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];

            maindiv.innerHTML = "";

            cart.forEach((product) => {
                let div = document.createElement("div");
                let img = document.createElement("img");
                let title = document.createElement("h1");
                let price = document.createElement("h4");
                let category = document.createElement("h4");
                let quantityDisplay = document.createElement("p");
                let removeBtn = document.createElement("button");
                let decreaseBtn = document.createElement("button");
                let increaseBtn = document.createElement("button");

                img.src = product.image;
                title.innerText = `Title: ${product.title}`;
                price.innerText = `Price: $${product.price}`;
                category.innerText = `Category: ${product.category}`;
                quantityDisplay.innerText = `Quantity: ${product.quantity}`;

                removeBtn.innerText = "Remove";
                removeBtn.addEventListener("click", () => removeFromCart(product));

                decreaseBtn.innerText = "-";
                decreaseBtn.addEventListener("click", () =>
                    updateQuantity(product, -1)
                );

                increaseBtn.innerText = "+";
                increaseBtn.addEventListener("click", () =>
                    updateQuantity(product, 1)
                );

                div.append(
                    img,
                    title,
                    price,
                    category,
                    quantityDisplay,
                    decreaseBtn,
                    increaseBtn,
                    removeBtn
                );
                maindiv.append(div);
            });
        };

        let removeFromCart = (productToRemove) => {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            let updatedCart = cart.filter(
                (product) => product.id !== productToRemove.id
            );
            localStorage.setItem("cart", JSON.stringify(updatedCart));
            renderCart();
        };

        let updateQuantity = (productToUpdate, change) => {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            let updatedCart = cart
                .map((product) => {
                    if (product.id === productToUpdate.id) {
                        product.quantity += change;
                    }
                    return product;
                })
                .filter((product) => product.quantity > 0);
            localStorage.setItem("cart", JSON.stringify(updatedCart));
            renderCart();
        };

        renderCart();
    </script>
</body>

</html>